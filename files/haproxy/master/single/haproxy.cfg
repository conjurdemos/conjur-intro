global
  daemon
  maxconn 256
  log-send-hostname

defaults
  mode tcp
  option http-use-htx
  timeout connect 5000ms
  timeout client  50000ms
  timeout server  50000ms

#
# Peform SSL Pass-Through to proxy HTTPS requests to DAP
#
frontend www
  mode tcp
  bind *:443
  option tcplog
  default_backend www-backend

#
# Performs Layer 4 proxy
# Uses DAP's HTTP health endpoint to determine master
#
backend www-backend
  mode tcp
  balance roundrobin
  option httpchk GET /health
  server conjur-master-1 conjur-master-1.mycompany.local:443 check port 444

#
# Enables HAProxy's UI for debugging
#
listen stats
  mode http
  bind *:7000
  stats enable
  stats uri /
