- !policy
  id: replication-sets
  body:
  # The host inherits privileges given to the layer, so the variables the
  # layer can 'read' will be replicated. The variable values will only be
  # replicated if the layer or the group or the host has the 'execute'
  # privilege on them.
  #
  # IMPORTANT: GRANTS within a POLICY can only GRANT to a role defined
  # within the policy.
  # Therefore, we must define a LAYER X in this policy that GRANTS
  # membership to a LAYER Y declared outside of this policy
  # (e.g. LOB Hosts). Finally, we can grant LAYER X
  # (and LAYER Y via transitivity) access to this replication set.
  #
  # References:
  # - Grants Example: https://docs.conjur.org/Latest/en/Content/Operations/Policy/statement-ref-grant.htm#Examples.
  - !policy
    id: replication-set-1
    body:
      - !layer replication-set-1-vault-synchronizer-hosts-lob-1-safe-1-hosts
      - !grant 
          role: !layer replication-set-1-vault-synchronizer-hosts-lob-1-safe-1-hosts
          member: !layer /vault-synchronizer-hosts/lob-1/safe-1/hosts
      - !grant
        role: !layer replication-set-1-vault-synchronizer-hosts-lob-1-safe-1-hosts
        member: !group
          account: system
          id: /conjur/replication-sets/replication-set-1/replicated-data