global
  daemon
  maxconn 256
  log 127.0.0.1 local0 debug
  log-send-hostname

defaults
  mode tcp
  # option http-use-htx
  option tcplog
  # option httpchk GET /health
  timeout connect 5000ms
  timeout client  50000ms
  timeout server  50000ms
  log global

#
# Perform TCP Pass-Through to proxy HTTPS/TCP requests to DAP
#
frontend dap-frontend
  bind *:5432

  default_backend dap-backend

backend dap-backend
  # balance roundrobin
  # server db database-1.staging.mycompany.com:5432  ssl crt /local_certs_2/combo.pem ca-file /certs/cas/database-1/chain.pem verify required
  server db database-1.staging.mycompany.com:5432 check port 5432 ssl crt /local_certs_2/combo.pem ca-file /certs/cas/database-1/chain.pem verify required

#
# Enables HAProxy's UI for debugging
#
listen stats
  mode http
  bind *:7000
  stats enable
  stats uri /
